$(function(){var e=$("#player"),t=$(window).width()/2,n=$(window).height()-e.height(),o=10,i=[],l=[],c=2,r=5,u=0,a={},d=!0,s=500;$(document).on("keydown",function(e){a[e.which]=!0}),$(document).on("keyup",function(e){a[e.which]=!1}),setInterval(function(){a[37]&&(t-=o),a[39]&&(t+=o),a[32]&&d&&(function(){var o=t+e.width()/2-5,i=n-20,c=$('<div class="bullet"></div>');c.css({left:o,top:i}),$("body").append(c),l.push({x:o,y:i,element:c})}(),d=!1,setTimeout(function(){d=!0},s)),m(),p(),f(),h(),v()},20);var w=setInterval(function(){b()},1e3);$(window).on("blur",function(){clearInterval(w)}),$(window).on("focus",function(){w=setInterval(function(){b()},1e3)});function m(){t<0?t=0:t>$(window).width()-e.width()&&(t=$(window).width()-e.width()),e.css({left:t,top:n})}function b(){var o=Math.random()*($(window).width()-20),n=-20,c=$('<div class="enemy"></div>');c.css({left:o,top:n}),$("body").append(c),i.push({x:o,y:n,element:c})}function p(){for(var e=i.length-1;e>=0;e--){var t=i[e];if((t.y+=c)>$(window).height())i.splice(e,1),t.element.remove();else{t.element.css({top:t.y})}}}function f(){for(var e=l.length-1;e>=0;e--){var t=l[e];if((t.y-=r)<-20)l.splice(e,1),t.element.remove();else{t.element.css({top:t.y})}}}function h(){for(var e=i.length-1;e>=0;e--){var t=i[e];for(var n=l.length-1;n>=0;n--){var o=l[n];g(t,o)&&(i.splice(e,1),t.element.remove(),l.splice(n,1),o.element.remove(),u++)}g(t,{x:t,y:n,element:e[0]})&&(alert("Game Over"),location.reload())}}function g(e,t){return!!(((e.y+e.element[0].offsetHeight)<(t.y))||(e.y>(t.y+t.element[0].offsetHeight))||((e.x+e.element[0].offsetWidth)<t.x)||(e.x>(t.x+t.element[0].offsetWidth)))}function v(){$("#score").text("Score: "+u)}})
